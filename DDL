-- CREATE

CREATE TABLE MEMBER (
    ID VARCHAR(14),
    PASSWD VARCHAR(20)
);
-- 항상 테이블 만든 후 Table 생성 확인
DESC USER_TABLES;

SELECT TABLE_NAME
FROM USER_TABLES; -- = SELECT * FROM TAB;

SELECT * FROM TAB;

CREATE TABLE STUDENT1(
    HAKBUN CHAR(7), -- 2020-01
    NAME VARCHAR2(20), -- 남궁민수
    ADDRESS VARCHAR2(200), -- 서울시 강남구 역삼동 한독빌딩 8층
    AGE NUMBER(3), --
    BIRTHDAY DATE,
    EMAIL VARCHAR2(100),
    HEIGHT NUMBER(4,1), -- 177.3
    WEIGHT NUMBER(4,1) -- 108.4
);

DROP TABLE student; -- 테이블을 삭제
TRUNCATE TABLE Student; -- 테이블 안의 데이터만 삭제, rollback불가 (DDL) 
DELETE FROM Student -- Rollback 가능 (DML)

REM 각 칼럼을 정의하면서 새로운 테이블 생성하기
-- 환자 번호, 진료 코드, 입원 일수, 나이, 진찰 부서, 진찰비, 입원비, 진료비

CREATE TABLE PATIENT (
    BUNHO NUMBER(1),
    CODE CHAR(2),
    DAYS NUMBER(3),
    AGE NUMBER(3),
    DAPARTMENT VARCHAR2(20),
    JINCHALFEE NUMBER(4),
    IPWONFEE NUMBER(7),
    TOTAL NUMBER(8)
);

DROP TABLE EMP_COPY;

CREATE TABLE EMP_COPY
AS
SELECT * FROM EMP; -- EMP TABLE의 구조와 데이터를 그대로 복사, 단 제약조건은 복사되지 않는다. 값복사

DESC EMP;
DESC EMP_COPY;

RENAME EMP_COPY TO EMP_COPY2;
RENAME EMP_COPY2 TO EMP_COPY;

TRUNCATE TABLE EMP_COPY;

DROP TABLE DEPT;
-- DROP TABLE 시 유의점은 자식 테이블이 참조하고 있으면 삭제 불가능

COMMENT ON TABLE EMP_COPY IS '이 테이블은 EMP 테이블을 복사한 테이블입니다.';
-- 주석을 달았다면 DICTIONARY에서 확인하자
DESC USER_TAB_COMMENTS;
SELECT TABLE_NAME, COMMENTS
FROM USER_TAB_COMMENTS;

COMMENT ON COLUMN EMP_COPY.HIREDATE IS '입사날짜';
DESC USER_COL_COMMENTS;
SELECT TABLE_NAME, COLUMN_NAME, COMMENTS
FROM USER_COL_COMMENTS;

REM ALTER TABLE : TABLE REMODELING

DROP TABLE EMP_COPY;

CREATE TABLE EMP_COPY10
AS 
SELECT EMPNO, ENAME 
FROM EMP
WHERE DEPTNO=10;

ALTER TABLE EMP_COPY10
ADD (JOB VARCHAR(9));

ALTER TABLE EMP_COPY10
ADD (HIREDATE DATE);

ALTER TABLE EMP_COPY10
ADD (SAL NUMBER(7,2));

ALTER TABLE EMP_COPY10
RENAME COLUMN SAL TO SALARY;

INSERT INTO EMP_COPY10(EMPNO, ENAME, JOB, HIREDATE)
VALUES(5555, '김빛나라', 'KBS저녁뉴스기자', SYSDATE);

ALTER TABLE EMP_COPY10
MODIFY ENAME VARCHAR2(20) 
MODIFY JOB VARCHAR2(30);

ALTER TABLE EMP_COPY10
--MODIFY SALARY DATE
MODIFY SALARY NUMBER(7,2);

ALTER TABLE EMP_COPY10
DROP COLUMN JOB; 

ALTER TABLE EMP_COPY10
DROP COLUMN HIREDATE; 

DESC EMP_COPY10;

SELECT *
FROM EMP_COPY10;

